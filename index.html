<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>수상한 동아리 — 인터랙티브 스토리</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #f0f0f0;
      color: #333;
      font-size: 16px;
      line-height: 1.5;
    }
    .container {
      max-width: 600px;
      margin: 0 auto;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    .stats {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
      font-weight: bold;
    }
    .story {
      margin-bottom: 20px;
    }
    .choices button {
      display: block;
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      background: #4CAF50;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
    }
    .choices button:hover {
      background: #45a049;
    }
    .controls {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }
    .controls button {
      padding: 10px 20px;
      background: #2196F3;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .controls button:hover {
      background: #1e88e5;
    }
    .hint {
      display: none;
      background: #ffeb3b;
      padding: 10px;
      margin-top: 10px;
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="stats">
      <span>플레이: <span id="playtime">0초</span></span>
      <span>진행: <span id="progress">0%</span></span>
    </div>
    <div class="stats">
      <span>신뢰도: <span id="trust">0</span></span>
      <span>단서: <span id="clues">0</span></span>
      <span>감시레벨: <span id="surveillance">0</span></span>
    </div>
    <div class="story" id="story">
      청화고의 신입생인 당신은 학교에서 가장 수상한 동아리, '비밀 연구회'에 대해 듣게 되었습니다. 소문에 따르면 이 동아리는 이상한 실험을 하고, 심지어 금지된 활동에 연루되어 있다고 합니다. 호기심에 이끌린 당신은 동아리의 비밀을 파헤치기로 결심합니다. 첫 번째 단서를 찾기 위해, 동아리 방으로 몰래 잠입하거나, 동아리 회원 중 한 명인 민서에게 접근할 수 있습니다. 어떻게 하시겠습니까?
    </div>
    <div class="choices" id="choices">
      <button onclick="makeChoice('sneak')">동아리 방으로 몰래 잠입한다</button>
      <button onclick="makeChoice('approach')">민서에게 접근한다</button>
    </div>
    <div class="hint" id="hint">힌트: 선택에 따라 신뢰도와 감시레벨이 변동될 수 있습니다. 신뢰도가 높으면 동아리 회원들이 당신을 더 믿지만, 감시레벨이 높아지면 동아리가 당신을 의심합니다.</div>
    <div class="controls">
      <button onclick="resetGame()">처음부터</button>
      <button onclick="toggleHint()">힌트</button>
      <button onclick="downloadHTML()">HTML 다운로드</button>
    </div>
    <div>오프라인 실행 가능 — 새로고침 시 초기화됩니다.</div>
    <div>버전: 수상한 동아리 v2.1</div>
  </div>

  <script>
    let state = {
      playtime: 0,
      progress: 0,
      trust: 0,
      clues: 0,
      surveillance: 0,
      currentScene: 'start'
    };

    const scenes = {
      start: {
        text: "청화고의 신입생인 당신은 학교에서 가장 수상한 동아리, '비밀 연구회'에 대해 듣게 되었습니다. 소문에 따르면 이 동아리는 이상한 실험을 하고, 심지어 금지된 활동에 연루되어 있다고 합니다. 호기심에 이끌린 당신은 동아리의 비밀을 파헤치기로 결심합니다. 첫 번째 단서를 찾기 위해, 동아리 방으로 몰래 잠입하거나, 동아리 회원 중 한 명인 민서에게 접근할 수 있습니다. 어떻게 하시겠습니까?",
        choices: [
          { text: "동아리 방으로 몰래 잠입한다", next: "sneak", action: () => { state.surveillance += 20; state.clues += 1; state.progress += 20; } },
          { text: "민서에게 접근한다", next: "approach", action: () => { state.trust += 10; state.progress += 10; } }
        ]
      },
      sneak: {
        text: "당신은 밤늦게 동아리 방으로 몰래 들어갑니다. 문은 잠겨 있지 않았지만, 내부는 어둡고 이상한 기계 소리가 들립니다. 책상에 놓인 노트북과 서류 더미를 발견했습니다. 노트북을 해킹하거나 서류를 살펴볼까요?",
        choices: [
          { text: "노트북을 해킹한다", next: "hack", action: () => { state.surveillance += 30; state.clues += 2; state.progress += 20; } },
          { text: "서류를 살펴본다", next: "documents", action: () => { state.surveillance += 10; state.clues += 1; state.progress += 15; } }
        ]
      },
      approach: {
        text: "민서를 도서관에서 만났습니다. 그는 긴장한 듯 보이지만, 당신과 이야기를 나누는 데 관심이 있어 보입니다. 민서에게 동아리의 활동에 대해 직접 물어보거나, 그의 신뢰를 얻기 위해 일상적인 대화를 나눌까요?",
        choices: [
          { text: "동아리 활동에 대해 묻는다", next: "ask", action: () => { state.trust -= 10; state.surveillance += 10; state.clues += 1; state.progress += 15; } },
          { text: "일상적인 대화를 나눈다", next: "chat", action: () => { state.trust += 20; state.progress += 10; } }
        ]
      },
      hack: {
        text: "노트북을 해킹했지만, 보안 시스템이 작동해 동아리 회원들에게 경고가 전송되었습니다. 다행히 암호화된 파일을 하나 얻었습니다. 파일에는 이상한 화학 실험 데이터가 포함되어 있습니다. 이 데이터를 분석하거나, 즉시 동아리 방을 떠날까요?",
        choices: [
          { text: "데이터를 분석한다", next: "analyze", action: () => { state.surveillance += 20; state.clues += 2; state.progress += 20; } },
          { text: "동아리 방을 떠난다", next: "escape", action: () => { state.surveillance -= 10; state.progress += 10; } }
        ]
      },
      documents: {
        text: "서류를 살펴보니, 동아리가 금지된 화학 물질을 사용하고 있다는 증거를 발견했습니다. 하지만 누군가 문을 여는 소리가 들립니다! 서류를 복사하거나, 숨을까요?",
        choices: [
          { text: "서류를 복사한다", next: "copy", action: () => { state.surveillance += 20; state.clues += 2; state.progress += 20; } },
          { text: "숨는다", next: "hide", action: () => { state.surveillance -= 10; state.progress += 10; } }
        ]
      },
      ask: {
        text: "민서는 당신의 질문에 당황하며 대답을 피합니다. 그는 동아리의 활동이 '그저 과학 프로젝트'라고 주장하지만, 그의 눈빛은 다른 이야기를 합니다. 그를 더 압박하거나, 화제를 바꿀까요?",
        choices: [
          { text: "그를 더 압박한다", next: "pressure", action: () => { state.trust -= 20; state.surveillance += 20; state.clues += 1; state.progress += 15; } },
          { text: "화제를 바꾼다", next: "chat", action: () => { state.trust += 10; state.progress += 10; } }
        ]
      },
      chat: {
        text: "민서와 가벼운 대화를 나누며 그의 신뢰를 얻었습니다. 그는 동아리 방에서 열리는 '특별한 모임'에 당신을 초대합니다. 초대를 받아들이거나, 거절하고 다른 단서를 찾아볼까요?",
        choices: [
          { text: "초대를 받아들인다", next: "meeting", action: () => { state.trust += 20; state.progress += 20; } },
          { text: "거절하고 다른 단서를 찾는다", next: "investigate", action: () => { state.clues += 1; state.progress += 15; } }
        ]
      },
      analyze: {
        text: "데이터를 분석한 결과, 동아리가 금지된 물질로 비밀리에 실험을 하고 있다는 증거를 확보했습니다. 하지만 감시레벨이 높아져 동아리가 당신을 의심하기 시작했습니다. 증거를 교사에게 제출하거나, 민서에게 이 사실을 알릴까요?",
        choices: [
          { text: "증거를 교사에게 제출한다", next: "report", action: () => { state.surveillance += 30; state.progress += 30; } },
          { text: "민서에게 알린다", next: "confront", action: () => { state.trust += 10; state.clues += 1; state.progress += 20; } }
        ]
      },
      escape: {
        text: "당신은 동아리 방을 무사히 빠져나왔지만, 단서를 더 얻지 못했습니다. 이제 민서에게 접근하거나, 다른 단서를 찾아볼까요?",
        choices: [
          { text: "민서에게 접근한다", next: "approach", action: () => { state.trust += 10; state.progress += 10; } },
          { text: "다른 단서를 찾는다", next: "investigate", action: () => { state.clues += 1; state.progress += 15; } }
        ]
      },
      copy: {
        text: "서류를 복사했지만, 동아리 회원이 방에 들어왔습니다. 당신은 간신히 들키지 않았지만, 감시레벨이 올라갔습니다. 복사한 서류를 분석하거나, 즉시 떠날까요?",
        choices: [
          { text: "서류를 분석한다", next: "analyze", action: () => { state.surveillance += 20; state.clues += 2; state.progress += 20; } },
          { text: "즉시 떠난다", next: "escape", action: () => { state.surveillance -= 10; state.progress += 10; } }
        ]
      },
      hide: {
        text: "당신은 책상 밑에 숨었고, 동아리 회원은 아무것도 눈치채지 못했습니다. 하지만 단서를 더 얻지 못했습니다. 이제 민서에게 접근하거나, 다른 단서를 찾아볼까요?",
        choices: [
          { text: "민서에게 접근한다", next: "approach", action: () => { state.trust += 10; state.progress += 10; } },
          { text: "다른 단서를 찾는다", next: "investigate", action: () => { state.clues += 1; state.progress += 15; } }
        ]
      },
      pressure: {
        text: "민서를 압박하자 그는 화를 내며 자리를 떠났습니다. 당신의 신뢰도가 떨어졌지만, 그의 주머니에서 떨어진 메모를 주웠습니다. 메모에는 '실험실 열쇠'라는 단어가 적혀 있습니다. 실험실로 가거나, 다른 단서를 찾아볼까요?",
        choices: [
          { text: "실험실로 간다", next: "lab", action: () => { state.surveillance += 20; state.clues += 2; state.progress += 20; } },
          { text: "다른 단서를 찾는다", next: "investigate", action: () => { state.clues += 1; state.progress += 15; } }
        ]
      },
      meeting: {
        text: "모임에 참석한 당신은 동아리 회원들이 이상한 화학 실험을 논의하는 것을 엿듣습니다. 그들은 금지된 물질을 사용하고 있으며, 이를 숨기기 위해 노력하고 있습니다. 이 정보를 교사에게 보고하거나, 민서에게 대질할까요?",
        choices: [
          { text: "교사에게 보고한다", next: "report", action: () => { state.surveillance += 30; state.progress += 30; } },
          { text: "민서에게 대질한다", next: "confront", action: () => { state.trust += 10; state.clues += 1; state.progress += 20; } }
        ]
      },
      investigate: {
        text: "학교 곳곳을 조사하며 동아리의 비밀에 대한 소문을 더 듣게 되었습니다. 한 학생이 동아리가 학교 지하실에서 비밀 실험을 하고 있다고 귀띔해줍니다. 지하실로 가거나, 민서에게 다시 접근할까요?",
        choices: [
          { text: "지하실로 간다", next: "lab", action: () => { state.surveillance += 20; state.clues += 2; state.progress += 20; } },
          { text: "민서에게 접근한다", next: "approach", action: () => { state.trust += 10; state.progress += 10; } }
        ]
      },
      lab: {
        text: "지하실 실험실에 도착한 당신은 금지된 화학 물질과 이상한 장비들을 발견했습니다. 하지만 보안 카메라가 당신을 찍고 있는 것 같습니다. 증거를 사진으로 찍거나, 즉시 떠날까요?",
        choices: [
          { text: "증거를 사진으로 찍는다", next: "photo", action: () => { state.surveillance += 30; state.clues += 3; state.progress += 30; } },
          { text: "즉시 떠난다", next: "escape", action: () => { state.surveillance -= 10; state.progress += 10; } }
        ]
      },
      photo: {
        text: "증거를 사진으로 찍었지만, 동아리 회원들이 당신을 발견했습니다! 그들은 당신을 추궁하며 증거를 넘기라고 요구합니다. 증거를 넘기거나, 도망칠까요?",
        choices: [
          { text: "증거를 넘긴다", next: "surrender", action: () => { state.trust -= 20; state.clues -= 2; state.progress += 10; } },
          { text: "도망친다", next: "flee", action: () => { state.surveillance += 20; state.progress += 20; } }
        ]
      },
      surrender: {
        text: "증거를 넘겼지만, 동아리는 당신을 믿지 않고 감시를 강화합니다. 이제 어떻게 할까요?",
        choices: [
          { text: "교사에게 도움을 요청한다", next: "report", action: () => { state.surveillance += 20; state.progress += 20; } },
          { text: "민서에게 사과하고 도움을 청한다", next: "confront", action: () => { state.trust += 10; state.progress += 15; } }
        ]
      },
      flee: {
        text: "당신은 간신히 도망쳤지만, 동아리는 당신을 의심하고 있습니다. 증거를 교사에게 제출하거나, 민서에게 도움을 요청할까요?",
        choices: [
          { text: "증거를 교사에게 제출한다", next: "report", action: () => { state.surveillance += 30; state.progress += 30; } },
          { text: "민서에게 도움을 요청한다", next: "confront", action: () => { state.trust += 10; state.clues += 1; state.progress += 20; } }
        ]
      },
      confront: {
        text: "민서에게 모든 것을 털어놓자, 그는 동아리의 실험을 막으려는 비밀 단체의 일원이라고 고백합니다. 당신은 그의 동료가 되어 동아리를 막거나, 교사에게 모든 것을 보고할 수 있습니다.",
        choices: [
          { text: "민서와 함께 동아리를 막는다", next: "teamup", action: () => { state.trust += 30; state.progress += 30; } },
          { text: "교사에게 보고한다", next: "report", action: () => { state.surveillance += 30; state.progress += 30; } }
        ]
      },
      teamup: {
        text: "민서와 함께 동아리의 실험을 막기 위해 계획을 세웠습니다. 당신의 노력으로 동아리의 불법 활동이 드러났고, 학교는 이를 조사하기 시작했습니다. 당신은 영웅이 되었습니다! [엔딩: 동아리 해체]",
        choices: [],
        ending: true
      },
      report: {
        text: "교사에게 증거를 제출하자, 동아리의 불법 활동이 밝혀졌습니다. 하지만 민서는 당신이 자신을 배신했다고 생각해 등을 돌렸습니다. 동아리는 해체되었지만, 당신은 친구를 잃었습니다. [엔딩: 고독한 승리]",
        choices: [],
        ending: true
      }
    };

    function updateUI() {
      document.getElementById('playtime').textContent = `${state.playtime}초`;
      document.getElementById('progress').textContent = `${state.progress}%`;
      document.getElementById('trust').textContent = state.trust;
      document.getElementById('clues').textContent = state.clues;
      document.getElementById('surveillance').textContent = state.surveillance;
      document.getElementById('story').textContent = scenes[state.currentScene].text;

      const choicesDiv = document.getElementById('choices');
      choicesDiv.innerHTML = '';
      if (scenes[state.currentScene].ending) {
        choicesDiv.innerHTML = '<p>게임 종료! 다시 시작하려면 "처음부터" 버튼을 누르세요.</p>';
      } else {
        scenes[state.currentScene].choices.forEach(choice => {
          const button = document.createElement('button');
          button.textContent = choice.text;
          button.onclick = () => makeChoice(choice.next);
          choicesDiv.appendChild(button);
        });
      }

      if (state.surveillance >= 80) {
        document.getElementById('story').textContent = "동아리가 당신을 완전히 의심하게 되었습니다. 그들은 당신을 쫓아내고 모든 증거를 숨겼습니다. [엔딩: 실패]";
        choicesDiv.innerHTML = '<p>게임 종료! 다시 시작하려면 "처음부터" 버튼을 누르세요.</p>';
      }
    }

    function makeChoice(nextScene) {
      const scene = scenes[state.currentScene];
      const choice = scene.choices.find(c => c.next === nextScene);
      if (choice && choice.action) choice.action();
      state.currentScene = nextScene;
      state.progress = Math.min(state.progress, 100);
      state.trust = Math.max(0, state.trust);
      state.clues = Math.max(0, state.clues);
      state.surveillance = Math.max(0, state.surveillance);
      updateUI();
    }

    function resetGame() {
      state = {
        playtime: 0,
        progress: 0,
        trust: 0,
        clues: 0,
        surveillance: 0,
        currentScene: 'start'
      };
      updateUI();
    }

    function toggleHint() {
      const hint = document.getElementById('hint');
      hint.style.display = hint.style.display === 'none' ? 'block' : 'none';
    }

    function downloadHTML() {
      const element = document.createElement('a');
      const file = new Blob([document.documentElement.outerHTML], { type: 'text/html' });
      element.href = URL.createObjectURL(file);
      element.download = 'suspicious_club.html';
      document.body.appendChild(element);
      element.click();
      document.body.removeChild(element);
    }

    setInterval(() => {
      state.playtime++;
      document.getElementById('playtime').textContent = `${state.playtime}초`;
    }, 1000);

    updateUI();
  </script>
</body>
</html>
